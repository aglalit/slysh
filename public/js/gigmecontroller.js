"use strict";function onMIDISuccess(e){console.log("MIDI ready!"),midi=e,midi.inputs.forEach(function(e,n){var o=document.createElement("option");o.text=e.name,document.getElementById("inputportselector").add(o)}),startLoggingMIDIInput(midi,4)}function onMIDIFailure(e){console.log("Failed to get MIDI access - "+e)}function onMIDIMessage(e){for(var n=e.data,o="MIDI message received at timestamp "+e.timeStamp+"["+n.length+" bytes]: ",t=0;t<n.length;t++)o+="0x"+n[t].toString(16)+" ";console.log(o);var i=(n[0]>>4,15&n[0],n[1]),s=0;n.length>2&&(s=n[2]),ws.send(n[0]+","+i+","+s)}function startLoggingMIDIInput(e,n){e.inputs.forEach(function(e){e.onmidimessage=onMIDIMessage})}var ws=new WebSocket("ws://192.168.2.1:8080");window.AudioContext=window.AudioContext||window.webkitAudioContext;var context=new window.AudioContext,pingCounter=0,serverTimeDiff=void 0;ws.onopen=function(e){console.log("Connection to server opened")},ws.onerror=function(e){console.log(e)},ws.onclose=function(e){console.log("WebSocket Error: ",e)},ws.onmessage=function(e){var n=e.data;n=e.data,3==n.split("###").length?pingCounter<50&&(ws.send(e.data),pingCounter++):"YeahBaby"==n?ws.send("PingMeNow"):n>1e5&&(serverTimeDiff=Date.now()-n,console.log(serverTimeDiff))},document.querySelector("#play").addEventListener("click",function(){ws.send(Date.now()-Date.now()%1e3+6e3)}),document.onkeydown=function(e){ws.send(e.keyCode)},document.onkeyup=function(e){ws.send(-e.keyCode)};var midi=void 0;navigator.requestMIDIAccess().then(onMIDISuccess,onMIDIFailure);